#!/bin/bash

echo '[*] Writing Flag Files. . .'

echo 'khi{i_g07_y0ur_r4w_4ddr3ss}' > /home/programmer/flag.txt
echo 'khi{im_n07_7h3_ry4n_g0sling}' > /home/programmer2/flag.txt
echo 'khi{i_l0v3_0v3rfl0w_2_sh3ll}' > /home/programmer3/flag.txt
echo 'khi{fin4lly_i7_y4pp3d_b4ck}' > /home/programmer4/flag.txt
echo 'khi{br0ugh7_2_us_by_F3D3X}' > /home/programmer5/flag.txt

echo '[*] Compiling Binaries. . .'

# create vuln bins
gcc /home/programmer/vuln.c  -o /home/programmer/vuln  -fno-stack-protector -no-pie
gcc /home/programmer2/vuln.c -o /home/programmer2/vuln -fPIE -pie
gcc /home/programmer3/vuln.c -o /home/programmer3/vuln -fno-stack-protector -no-pie -z execstack
gcc /home/programmer4/vuln.c -o /home/programmer4/vuln -fno-stack-protector -no-pie -z execstack
gcc /home/programmer5/vuln.c -o /home/programmer5/vuln -fno-stack-protector -no-pie -z execstack

echo '[*] Fixing Ownerships. . .'

# Change ownerships
chown -R programmer:programmer /home/programmer
chown -R programmer:programmer2 /home/programmer2
chown -R programmer:programmer3 /home/programmer3
chown -R programmer:programmer4 /home/programmer4
chown -R programmer:programmer5 /home/programmer5

echo '[+] Finished!'