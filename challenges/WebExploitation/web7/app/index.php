<?php
$request = $_SERVER['REQUEST_URI'];

// Extract the path and query parameters
$parsedUrl = parse_url($request);
$path = $parsedUrl['path']; // the URI path without query parameters
$query = isset($parsedUrl['query']) ? $parsedUrl['query'] : '';

// load a specific page based on the URI
switch ($path) {
    case '/':
    case '':
        require __DIR__ . '/home.php';
        break;
    case '/logout':
        require __DIR__ . '/logout.php';
        break;
    case '/login':
        require __DIR__ . '/login.php';
        break;
    case '/register':
        require __DIR__ . '/register.php';
        break;
    case '/new_post':
        require __DIR__ . '/new_post.php';
        break;
    case '/add_post':
        if ($method === 'POST') {
            require __DIR__ . '/add_post.php';
        } else {
            http_response_code(405);
            echo "405 Method Not Allowed";
        }
        break;
    case '/admin':
        require __DIR__ . '/admin.php';
        break;
    default:
        http_response_code(404);
        echo "404 Not Found";
        break;
}
?>