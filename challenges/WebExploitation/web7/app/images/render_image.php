<?php
function renderImage($filePath) {
    $fullPath = $filePath;

    if (!file_exists($fullPath)) {
        http_response_code(404);
        echo "<h2>File not found:</h2><p>$fullPath</p>";
        return;
    }

    $mimeType = mime_content_type($fullPath);
    header("Content-Type: $mimeType");
    readfile($fullPath);
}

$method = $_SERVER['REQUEST_METHOD'];

if ($method === 'POST') {
    http_response_code(405);
    echo "405 Method Not Allowed";
} else {
    if (!isset($_REQUEST['image'])) {
        echo "No image given.";
    } else {
        $imagePath = $_REQUEST['image'];
        renderImage($imagePath);
    }
}
?>