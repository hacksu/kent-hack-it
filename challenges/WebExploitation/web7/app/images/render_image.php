<?php
// uhoh super dangerous LFI owo
function renderImage($filePath) {
    if (!file_exists($filePath)) {
        http_response_code(404);
        echo "File not found.";
        return;
    }

    $mimeType = mime_content_type($filePath);
    header("Content-Type: $mimeType");
    readfile($filePath);
}

$method = $_SERVER['REQUEST_METHOD'];

if ($method === 'POST') {
    http_response_code(405);
    echo "405 Method Not Allowed";
} else {
    if (!isset($_REQUEST['image'])) {
        echo "No image given.";
    } else {
        $imagePath = $_REQUEST['image'];
        renderImage($imagePath);
    }
}
?>